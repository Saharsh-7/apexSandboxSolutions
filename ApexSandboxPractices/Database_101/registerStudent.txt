/*

The method registerStudent takes as input strings name, phone and email, and returns a string. 
Implement the method to insert an apxio__Student__c record with the Name, apxio__Phone__c and apxio__Email__c fields 
filled out, and return the autogenerated apxio__Registration_Number__c of the new record.


You will be working with the following custom object and field names for this problem:

apxio__Student__c
apxio__Student__c.apxio__Email__c
apxio__Student__c.apxio__Phone__c
apxio__Student__c.apxio__Registration_Number__c
When records are inserted, the Id is available immediately available on the record, 
but other fields that were changed or populated as a result of the insert are not.

Query the apxio__Student__c record after it has been inserted to obtain the registration number

Discuss this problem on the ApexSandbox.io Trailblazer Community Group


*/



public String registerStudent(String name, String phone, String email) {
    // code here


    // Creating instance of the apxio__Student__c

    apxio__Student__c studentRecords = new apxio__Student__c();

    // an empty list of the apxio__Student__c
    List<apxio__Student__c> studentRecordList = new List<apxio__Student__c>();

    studentRecords.Name = name;
    studentRecords.apxio__Email__c = email;
    studentRecords.apxio__Phone__c = phone;

    // adding the details inside the list

    studentRecordList.add(studentRecords);

    //inseting the list
    if (!studentRecordList.isEmpty()) {
        insert studentRecordList;



    }

   
    // Soql query to return the registration number

    List<apxio__Student__c> registerNumber = [SELECT Id, Name, 
                                            apxio__Phone__c, apxio__Email__c,
                                            apxio__Registration_Number__c
                                            FROM apxio__Student__c where Id =: studentRecords.Id limit 1];

    return registerNumber[0].apxio__Registration_Number__c;


}